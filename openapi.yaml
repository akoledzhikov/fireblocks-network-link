openapi: 3.0.0
info:
  title: Fireblocks Connector for Exchanges
  version: "0.7.4"
  contact:
    email: support@fireblocks.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
  x-logo:
    url: 'https://drive.google.com/uc?id=1sseKokeIoh7hnUpV8skWYF_VzncF3slT'
    altText: 'Fireblocks logo'
  description: |
    <h1>Overview</h1>

    [Fireblocks](https://fireblocks.com) is the digital asset infrastructure for 1,000s of the leading trading desks, hedge funds, brokerages, custodians, and banks. Through the Fireblocks Console, users connect and trade on over 30 exchanges. To meet the demand of exchanges who want to access the liquidity of institutional investors and traders, Fireblocks is opening our platform so exchanges can quickly integrate.

    <h2>Benefits</h2>
    <ul><li>Enhance the visibility and liquidity of your exchange.
    <ul><li>Fireblocks customers transact 20x more with exchanges supported on Fireblocks vs. unsupported exchanges</li></ul></li>

    <li>Deliver a better experience to your customers who use Fireblocks with greater control of how the Fireblocks platform interacts with your exchange.
    <ul><li>Control rate limits and response codes</li>
    <li>Manage the supported assets</li>
    <li>Optimize the platform load for requests from Fireblocks</li></ul>
    </li></ul>
    
    <h2>How Fireblocks customers access exchanges</h2>

    <p>Fireblocks customers use the Fireblocks web-based console to connect their third-party accounts such as crypto exchanges. This requires generating an API Key and an API Secret from their exchange portals, logging into their Fireblocks Console, adding an exchange account, selecting the exchange by a name and a logo, and then entering their account API Key, API Secret, and login details.</p>
    
    <p>Once the third-party account is connected, Fireblocks customers can use the Fireblocks Console and API to:</p>
    
    <ul><li>View their exchange account balances for their main, sub, and various trading accounts</li>
    <li>Withdraw and deposit funds between their connected exchange accounts, their Fireblocks Vault, and counterparties</li>
    <li>Track the status of their withdrawals and deposits</li>
    <li>View and audit their transaction history</li></ul>
    
    <h2>Getting Started to Official Launch</h2>

    <p>Fireblocks Connector for Exchanges is currently limited to select exchanges.

    <p> Contact your Fireblocks Sales Rep to list your exchange in the Fireblocks ecosystem. You will need to sign a licensing agreement for listing your exchange. Please note that an exchange listing license agreement is separate from a self-custody license agreement, and neither agreement is required to sign the other. Once signed, you will receive a test environment to connect and begin integrating your pending exchange integration.</p>

    <p>Begin configuring inbound connections for the API endpoints described below. Fireblocks initiates calls to each of these endpoints under your base URL whenever a Fireblocks customer accesses your exchange using the Fireblocks integration.
    Once your contract is signed, the Fireblocks technical team will reach out to you to gather your exchange registration settings (see below).</p>

    <p>Fireblocks starts each exchange integration with a short beta program. At a minimum, the beta participant will be yourself. Optionally, you may engage with your clients who already use Fireblocks for trading and self-custody to provide feedback on the beta program. Once the Fireblocks team determines the beta is successful, your exchange is made available to all Fireblocks customers, alongside mutual marketing activities to promote the launch.</p>
    
    <h3>Register your exchange with Fireblocks</h3>
    <p>Once your license agreement for listing your exchange with Fireblocks is signed, the Fireblocks technical team will request the following exchange registration settings:</p>
    <ol>
    <li>Display name: i.e. “My Exchange” or “My Exchange Sandbox”</li>
    <li>Icon: a 32x32 .svg file</li>
    <li>Step-by-step guide for generating an API Key from your exchange platform. A public link to your knowledge base is preferred. A sharable document or PDF is also acceptable.</li>
    <li>Base URL for your API endpoints: i.e. https://my-exchange.com/fireblocks</li>
    <li>Version: The Fireblocks Exchange Connector major version number. Our current and only major version is 1.</li>
    <li>Is sandbox exchange: true or false</li>
    <li>Connection supports withdrawals from the exchange: true or false</li>
    <li>Connection supports deposits to the exchange: true or false</li>
    <li>Connection supports tracking for transaction status: true or false</li>
    <li>Connection supports sub-accounts: true or false</li>
    <li>Connection supports sub-account to sub-account transfers: true or false</li>
    <li>Does transferring assets to the exchange account require manually generating a deposit address?: true or false</li>
    <li>Select your authentication preferences:
    <ol><li>Request encoding format: valid values are PLAIN, BASE64, HEXSTR, BASE58, BASE32
    <li>Request signing format: valid values are HMAC_SHA512, HMAC_SHA3_256, HMAC_SHA256
    <li>Signature encoding result: valid values are PLAIN, BASE64, HEXSTR, BASE58, BASE32
    <li>Supports nonce numbers for accurate request identification: true or false, default is true</li></ol>
    </li></ol>

    <h1>Creating a Request</h1>

    All REST requests will contain the following headers:

    <p>*X-FBAPI-KEY* The API key as a string.</p>
    <p>*X-FBAPI-SIGNATURE* The payload signature output.</p>
    <p>*X-FBAPI-TIMESTAMP* A timestamp of the request (in milliseconds)</p>
    <p>*X-FBAPI-NONCE* A unique reference to the request (Random)</p>

    <h1>Selecting a Timestamp</h1>

    <p>The X-FBAPI-TIMESTAMP header is the number of milliseconds since Unix Epoch in UTC. e.g. 1547015186532</p>

    <p>The difference between the timestamp and the exchange service time must be less than X seconds.</p>
    <p>The amount of seconds (=X) is up to the exchange to decide - recommended to be a reasonable amount.</p>
    <p>It's expected that the request on the exchange's end will be considered expired and rejected otherwise.</p>

    <h1>Authentication Fundamentals</h1>

    <p>[Authentication scheme is configurable: HMAC]</p>

    <h2>Using HMAC</h2>

    <p>The API-KEY and SECRET are <b>necessary</b>, and are generated and provided by the exchange.</p>

    <h3>X-FBAPI-SIGNATURE for HMAC:</h3>

    <p>1) Create a prehash string {timestamp+nonce+method+endpoint+body}.</p>
    <p>2) Apply an encoding onto the prehash string (Pre-encoding is configurable: PLAIN, BASE64, HEXSTR, BASE58, BASE32)</p>
    <p>[The request body is a JSON string and need to be the same with the parameters passed by the API]</p>
    <p>3) Use SECRET to sign the string with HMAC (Internal hash function is configurable: SHA512, SHA3_256, SHA256)</p>
    <p>4) Apply an additional encoding onto the signature result (Post-encoding is configurable: PLAIN, BASE64, HEXSTR, BASE58, BASE32)</p>

    <h3><i>Notes</i></h3>

    <p>- The timestamp in the signature payload is consistent with the X-FBAPI-TIMESTAMP field in the request header.</p>
    <p>- The body to be signed is consistent with the content of the request body.</p>
    <p>- The method is always UPPER CASE.</p>
    <p>- For GET requests, the endpoint in the signature payload contains the query string. e.g. /v1/depositAddress<b>?coinSymbol=ETH&...</b></p>
    <p>- The endpoint in the signature payload don't have to contain the entire path, or could contain more paths, it's configurable.</p>
    <p>- The body is "" if there is no request body (for GET requests).</p>

    <h1>Error responses</h1>
    <p>Upon failures, the expected format of the error is as follows: </p>
    <pre id="json"><div class="redoc-json"><code><span class="ellipsis"></span><span class="token punctuation">{</span><ul style="list-style: none;"><li><div class="hoverable "><span class="property token string">"error"</span>: <span class="token string">"Missing request header params"</span><span class="token punctuation">,</span></div></li><li><div class="hoverable "><span class="property token string">"errorCode"</span>: <span class="token string">400000</span></div></li></ul><span class="token punctuation">}</span><span class="ellipsis"></span></code></div></pre>
    <p>"error" must be a string and is required.</p>
    <p>"errorCode" must either be a number or null.</p>
    <p>
    <h2>Predefined error codes on HTTP response 400:</h2>
    <table>
    <tr><p><td>Missing request header params</td><td>400000</td></p></tr>
    <tr><p><td>Nonce sent was invalid</td><td>400001</td></p></tr>
    <tr><p><td>Timestamp sent was invalid</td><td>400002</td></p></tr>
    <tr><p><td>Signature sent was invalid</td><td>400003</td></p></tr>
    <tr><p><td>Insufficient permissions for this API key</td><td>400004</td></p></tr>
    <tr><p><td>Insufficient funds to carry out this operation</td><td>400005</td></p></tr>
    <tr><p><td>Insufficient fee to carry out this operation</td><td>400006</td></p></tr>
    <tr><p><td>Unsupported account type for this exchange</td><td>400007</td></p></tr>
    <tr><p><td>Unsupported operation for this exchange</td><td>400008</td></p></tr>
    <tr><p><td>Asset not supported on this exchange</td><td>400009</td></p></tr>
    <tr><p><td>One of the parameters sent in the body or query is invalid</td><td>400010</td></p></tr>
    <tr><p><td>Bad address format sent</td><td>400011</td></p></tr>
    <tr><p><td>Balance amount is too small</td><td>400012</td></p></tr>
    <tr><p><td>This exchange needs manual deposit address generation</td><td>400013</td></p></tr>
    <tr><p><td>The exchange rejected this operation</td><td>400014</td></p></tr>
    <tr><p><td>Withdraw was cancelled or failed on the exchange</td><td>400015</td></p></tr>
    <tr><p><td>Address wasn't whitelisted</td><td>400016</td></p></tr>
    <tr><p><td>IP wasn't whitelisted</td><td>400017</td></p></tr>
    <tr><p><td>Account not found</td><td>400018</td></p></tr>
    <tr><p><td>Withdrawals are limited by the exchange. Please try again in a bit.</td><td>400019</td></p></tr>
    </table>
    <p><p><i>Note</i> that not all error codes need to be in use!</p></p>
servers:
  - url: 'https://api.fireblocks.com/'
paths:  
  /v1/accounts:
    get:
      summary: Fetches list of all account types, and the balances within them.
      description: >
              In case the exchange supports an account type but the account doesn't
              contain any balance in that account type, it is expected the "balances"
              field to be an empty array.
      operationId: GET /accounts
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Balance'
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.

  /v1/depositAddress:
    get:
      summary: Fetch the deposit wallet address for a coinSymbol and network
      description: > 
        Fireblocks will first check if a deposit wallet address exists using this endpoint.
        If one does not exist, then a new address will be created using the `POST /v1/depositAddress` endpoint.
      operationId: GET /depositAddress
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
        - name: accountType
          in: query
          required: true
          description: >
            The account type to return the deposit address from.
            The API will fill the fundableAccountType here.
          schema:
            $ref : '#/components/schemas/Account_Type' 
        - name: coinSymbol
          in: query
          required: true
          example: "USDT"
          schema:
            type: string
        - name: network
          in: query
          required: true
          schema:
            oneOf:
              - $ref: '#/components/schemas/Mainnet_Networks'
              - $ref: '#/components/schemas/Testnet_Networks'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required: [depositAddress]
                properties:
                  depositAddress:
                    type: string
                    description: "The address of the deposit address. If not found, it will be empty."
                    example: "0xb794f5ea0ba39494ce839613fffba74279579268"
                  depositAddressTag:
                    type: string
                    description: "A destination tag/memo to include for supported coins (e.g. XLM, XRP etc')"
                    example: "63163621"
                    nullable: true
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '404':
          description: Account ID or Account Type not found or supported.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.
    post:
      summary: Create a new deposit wallet address for a given coinSymbol and network
      operationId: POST /depositAddress
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
      requestBody:
        required: true
        content:
          application/json:
            schema:
                type: object
                description: "Deposit address details to be created."
                required:
                  - accountType
                  - coinSymbol
                  - network
                properties:
                  accountType:
                    description: >
                      The account type to create the deposit address for.
                      The API will fill the fundableAccountType here.
                    $ref : '#/components/schemas/Account_Type' 
                  coinSymbol:
                    example: "USDT"
                    type: string
                  network:
                    oneOf:
                    - $ref: '#/components/schemas/Mainnet_Networks'
                    - $ref: '#/components/schemas/Testnet_Networks'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required: [depositAddress]
                properties:
                  depositAddress:
                    type: string
                    description: "The address of the deposit address. If not found, it will be empty."
                    example: "0xb794f5ea0ba39494ce839613fffba74279579268"
                  depositAddressTag:
                    type: string
                    description: "A destination tag/memo to include for supported coins (e.g. XLM, XRP etc')"
                    example: "63163621"
                    nullable: true
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '404':
          description: Account ID or Account Type not found or supported.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.

  /v1/withdrawalFee:
    get:
      summary: Fetch the estimated transaction fee required for an external withdrawal
      operationId: GET /withdrawalFee
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
        - name: transferAmount
          in: query
          required: true
          schema:
            type: string
        - name: coinSymbol
          in: query
          required: true
          schema:
            type: string
        - name: network
          in: query
          required: true
          schema:
            oneOf:
              - $ref: '#/components/schemas/Mainnet_Networks'
              - $ref: '#/components/schemas/Testnet_Networks'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required: [feeAmount]
                properties:
                  feeAmount:
                    type: string
                    example: "0.23823"
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.

  /v1/withdraw:
    post:
      summary: Initiate a withdrawal from Exchange wallet to external wallet address
      operationId: POST /withdraw
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: Withdrawal request to be submitted.
              required:
                - accountType
                - toAddress
                - coinSymbol
                - network
                - amount
                - isGross
              properties:
                accountType:
                  $ref : '#/components/schemas/Account_Type'
                toAddress:
                  example: "bc1qs95ej87htkfy5786anzwh8sz3gmzvqh2d2uey2"
                  type: string
                tag:
                  description: "A 'tag' or 'memo', if required by the network"
                  type: string
                  nullable: true
                  example: null
                coinSymbol:
                  example: "ETH"
                  type: string
                network:
                  oneOf:
                    - $ref: '#/components/schemas/Mainnet_Networks'
                    - $ref: '#/components/schemas/Testnet_Networks'
                amount:
                  example: "0.0010597"
                  type: string
                isGross:
                  example: true
                  description: "Is the amount sent a gross amount?"
                  type: boolean
                maxFee:
                  example: "0.00001616"
                  description: The service fee charged for withdrawal
                  type: string
                  nullable: true
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required: [transactionID]
                properties:
                  transactionID:
                    type: string
                    description: "The requested transaction ID to process."
                    example: "3e8374383acce78d38be7fe9"
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '404':
          description: Account ID or Account Type not found or supported.
        '415':
          description: Unsupported media type. You need to use application/json.
        '429':
          description: Rate limit reached
        '500':
          description: Exchange internal error.

  /v1/transactionByID:
    get:
      summary: Fetch the status of a given transaction ID
      operationId: GET /transactionByID
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
        - name: transactionID
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: >
            Successful operation.
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    title: "Transaction found"
                    description: Transaction details result from the exchange.
                    required: [transactionID, status, txHash, amount, serviceFee, coinSymbol, network, direction, timestamp]
                    properties:
                      transactionID:
                        type: string
                        example: "46bas218d9h21uhib4i1u2h"
                      status:
                        $ref: '#/components/schemas/Status_Found'
                      txHash:
                        type: string
                        example: "44e25bc0ed840f9bf0e58d6227db15192d5b89e79ba4304da16b09703f68ceaf"
                      amount:
                        type: string
                        description: "The net amount of the transaction"
                        example: "1.1"
                      serviceFee:
                        type: string
                        example: "0.000000031"
                      coinSymbol:
                        type: string
                        example: "ETH"
                      network:
                        oneOf:
                          - $ref: '#/components/schemas/Mainnet_Networks'
                          - $ref: '#/components/schemas/Testnet_Networks'
                      direction:
                        $ref: '#/components/schemas/Direction_for_Withdraw'
                      timestamp:
                        type: number
                        format: UNIX-timestamp-epoch
                        description: "Milliseconds"
                        example: 1546658861000
                  - type: object
                    title: "Transaction not found"
                    description: Transaction details not found.
                    required:
                      - status
                    properties:
                      status:
                        $ref: '#/components/schemas/Status_Not_Found'
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.

  /v1/transactionByHash:
    get:
      summary: Fetch the status of a given <txHash, network> pair
      operationId: GET /transationByHash
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
        - name: txHash
          in: query
          description: "The requested TxHash to query. Could be intrinsic but could also not be."
          required: true
          schema:
            type: string
        - name: network
          in: query
          required: true
          schema:
            oneOf:
              - $ref: '#/components/schemas/Mainnet_Networks'
              - $ref: '#/components/schemas/Testnet_Networks'
      responses:
        '200':
          description: >
            Successful operation.
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    title: "Transaction found"
                    description: Transaction details result from the exchange.
                    required: [transactionID, status, txHash, amount, serviceFee, coinSymbol, network, direction, timestamp]
                    properties:
                      transactionID:
                        type: string
                        example: "46bas218d9h21uhib4i1u2h"
                      status:
                        $ref: '#/components/schemas/Status_Found'
                      txHash:
                        type: string
                        example: "44e25bc0ed840f9bf0e58d6227db15192d5b89e79ba4304da16b09703f68ceaf"
                      amount:
                        type: string
                        description: "The net amount of the transaction"
                        example: "1.1"
                      serviceFee:
                        type: string
                        example: "0.000000031"
                      coinSymbol:
                        type: string
                        example: "ETH"
                      network:
                        oneOf:
                        - $ref: '#/components/schemas/Mainnet_Networks'
                        - $ref: '#/components/schemas/Testnet_Networks'
                      direction:
                        $ref: '#/components/schemas/Direction_for_Deposit'
                      timestamp:
                        type: number
                        format: UNIX-timestamp-epoch
                        description: "Milliseconds"
                        example: 1546658861000
                  - type: object
                    title: "Transaction not found"
                    description: Transaction details not found.
                    required:
                      - status
                    properties:
                      status:
                        $ref: '#/components/schemas/Status_Not_Found'
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.

  /v1/transactionHistory:
    get:
      summary: Fetch the history of all transactions
      operationId: GET /transactionHistory
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
        - name: fromDate
          in: query
          required: true
          schema:
            type: string
            format: UNIX-timestamp-epoch
            description: "Milliseconds"
            example: "1546658861000"
        - name: toDate
          in: query
          required: true
          schema:
            type: string
            format: UNIX-timestamp-epoch
            description: "Milliseconds"
            example: "1546658865000"
        - name: pageSize
          in: query
          description: "Number of entries per page size in response"
          required: true
          schema:
            type: number
            minimum: 1
            example: 500
        - name: pageCursor
          in: query
          required: false
          description: "If not specified, return the first page. Otherwise, return the page the cursor points to."
          schema:
            type: string
            nullable: true
            example: null
        - name: isSubTransfer
          in: query
          required: true
          description: "If this is a sub-account tranfer, either subMainTransfer or subaccountTransfer."
          schema:
            type: boolean
            example: false
        - name: coinSymbol
          in: query
          required: true
          example: "USDT"
          schema:
            type: string
        - name: network
          in: query
          required: true
          description: "If isSubTransfer is true, this value could be null. Otherwise, it will be specified."
          schema:
            oneOf:
              - nullable: true
              - $ref: '#/components/schemas/Mainnet_Networks'
              - $ref: '#/components/schemas/Testnet_Networks'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required: [transactions]
                properties:
                  nextPageCursor:
                      type: string
                      nullable: true
                      example: null
                      description: "If not present, refers to the last possible page. Otherwise refers to the next page."
                  transactions:
                    type: array
                    items:
                      type: object
                      description: "Transaction details result from the exchange."
                      required: [transactionID, status, txHash, amount, serviceFee, coinSymbol, network, direction, timestamp]
                      properties:
                        transactionID:
                          type: string
                          example: "46bas218d9h21uhib4i1u2h"
                        status:
                          $ref: '#/components/schemas/Status_Found'
                        txHash:
                          type: string
                          example: "44e25bc0ed840f9bf0e58d6227db15192d5b89e79ba4304da16b09703f68ceaf"
                        amount:
                          type: string
                          description: "The net amount of the transaction"
                          example: "1.1"
                        serviceFee:
                          type: string
                          example: "0.000000031"
                        coinSymbol:
                          type: string
                          example: "ETH"
                        network:
                          description: "If isSubTransfer was true, this value could be null. Otherwise it's required."
                          oneOf:
                          - nullable: true
                          - $ref: '#/components/schemas/Mainnet_Networks'
                          - $ref: '#/components/schemas/Testnet_Networks'
                        direction:
                          $ref: '#/components/schemas/Direction_for_Deposit'
                        timestamp:
                          type: number
                          format: UNIX-timestamp-epoch
                          description: "In Milliseconds. The timestamp on the creation of the transaction."
                          example: 1546658861000
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.

  /v1/supportedAssets:
    get:
      summary: Fetch the assets supported by the exchanges
      operationId: GET /supportedAssets
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  required: [coinSymbol, network, coinClass]
                  properties:
                    coinSymbol:
                      type: string
                      example: "USDT"
                    network:
                      oneOf:
                        - $ref: '#/components/schemas/Mainnet_Networks'
                        - $ref: '#/components/schemas/Testnet_Networks'
                    coinClass:
                      $ref: '#/components/schemas/Coin_Class'
                    identifiers:
                      type: array
                      nullable: true
                      description: >
                        The identifier(s) for asset types that are created by a smart contract (ERC20, BEP20, etc'), could be a contractAddress for example.

                        Some tokens require multiple identifiers (for example, XLM).

                        The order of the identifiers is via heirarchy (for example, XLM has on it's first identifier the contractAddress and the second the contractAddressSpecifier)
                      items:
                        type: string
                        example: "0xdAC17F958D2ee523a2206206994597C13D831ec7"
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '415':
          description: Unsupported media type. You need to use application/json.
        '500':
          description: Exchange internal error.

  /v1/subMainTransfer:
    post:
      summary: Initiate a transfer between an internal sub-account and the main-account
      operationId: GET /subMainTransfer
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subAccountID
                - direction
                - coinSymbol
                - amount
              properties:
                subAccountID:
                  example: "1164fbab-1968-441d-848c-4cbe5ced4328"
                  type: string
                direction:
                  $ref: '#/components/schemas/Direction_for_Sub_Main_transfer'
                coinSymbol:
                  example: "USDT"
                  type: string
                amount:
                  example: "7.3"
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required:
                  - completed
                properties:
                  completed:
                    type: boolean
                    example: true
                    description: "If true, the transaction will be completed instantly, else /transactionHistory will be invoked until completion."
                  transactionID:
                    type: string
                    nullable: true
                    example: "3e8374383acce78d38be7fe9"
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '404':
          description: Account ID or Account Type not found or supported.
        '415':
          description: Unsupported media type. You need to use application/json.
        '429':
          description: Rate limit reached
        '500':
          description: Exchange internal error.
 
  /v1/subaccountsTransfer:
    post:
      summary: Initiate a transfer between an two sub-accounts
      operationId: GET /subaccountsTransfer
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - srcSubAccountID
                - dstSubAccountID
                - coinSymbol
                - amount
              properties:
                srcSubAccountID:
                  example: "81690809-5eb9-48be-8eb5-6af17131d7dc"
                  type: string
                dstSubAccountID:
                  example: "d6eba9e6-b867-4f9b-9353-ceb7a2db9311"
                  type: string
                coinSymbol:
                  example: "BTC"
                  type: string
                amount:
                  example: "0.03"
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required:
                  - completed
                properties:
                  completed:
                    type: boolean
                    example: true
                    description: "If true, the transaction will be completed instantly, else /transactionHistory will be invoked until completion."
                  transactionID:
                    type: string
                    nullable: true
                    example: "3e8374383acce78d38be7fe9"
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '404':
          description: Account ID or Account Type not found or supported.
        '415':
          description: Unsupported media type. You need to use application/json.
        '429':
          description: Rate limit reached
        '500':
          description: Exchange internal error.

  /v1/internalTransfer:
    post:
      summary: Initiate a transfer from one internal account to another, eg. TRADING to MARGIN
      operationId: GET /internalTransfer
      parameters:
        - name: X-FBAPI-KEY
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-KEY'
        - name: X-FBAPI-TIMESTAMP
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-TIMESTAMP'
        - name: X-FBAPI-SIGNATURE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-SIGNATURE'
        - name: X-FBAPI-NONCE
          in: header
          required: true
          schema:
            $ref: '#/components/schemas/X-FBAPI-NONCE'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fromAccountType
                - toAccountType
                - coinSymbol
                - amount
              properties:
                fromAccountType:
                  $ref : '#/components/schemas/Account_Type'
                toAccountType:
                  $ref : '#/components/schemas/Account_Type_2'
                coinSymbol:
                  example: "USDT"
                  type: string
                amount:
                  example: "1.4"
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                required:
                  - completed
                properties:
                  completed:
                    type: boolean
                    example: true
                    description: "If true, the operation is regarded as a success, else the operation is regarded as a failure."
                  transactionID:
                    type: string
                    nullable: true
                    example: "3e8374383acce78d38be7fe9"
        '400':
          description: Return custom error and error code here.
        '401':
          description: Unauthorized. Either API details are missing or invalid
        '403':
          description: Forbidden- You do not have access to the requested resource.
        '404':
          description: Account ID or Account Type not found or supported.
        '415':
          description: Unsupported media type. You need to use application/json.
        '429':
          description: Rate limit reached
        '500':
          description: Exchange internal error.

components:
  schemas:
    X-FBAPI-KEY:
      type: string
      description: >
        All requests must include the X-FBAPI-KEY header containing your API key.
    X-FBAPI-TIMESTAMP:
      type: number
      format: UNIX-timestamp-epoch
      description: >
        All requests must include the X-FBAPI-TIMESTAMP header containing the timestamp (in milliseconds).
      example:
        1546658861000
    X-FBAPI-NONCE:
      type: string
      description: >
        All requests must include the X-FBAPI-NONCE header, a unique string to the request being a reference for that request.
      example:
        "8853b277-d5f5-4363-bf5f-633b735e1413"
    X-FBAPI-SIGNATURE:
      type: string
      description: >
        All requests must include the X-FBAPI-SIGNATURE header containing the signature of the request.
    Account_Type:
      type: string
      description: "Enumeration on types of possible accounts"
      enum:
        - EXCHANGE
        - SPOT
        - FUNDING
        - MARGIN
        - FUTURES
        - OPTIONS
      example:
        MARGIN
    Account_Type_2:
      type: string
      description: "Enumeration on types of possible accounts"
      enum:
        - EXCHANGE
        - SPOT
        - FUNDING
        - MARGIN
        - FUTURES
        - OPTIONS
      example:
        SPOT
    Mainnet_Networks:
      type: string
      description: "Enumeration on types of possible networks for a mainnet exchange."
      enum:
      - Ethereum
      - Chiliz
      - BNB Chain
      - Polygon
      - Arbitrum
      - Fantom
      - Avalanche
      - ANZ Bank
      - Solana
      - Cardano
      - Algorand
      - Optimism
      - Tron
      - Stellar
      - Cosmos
      - Ronin
      - Bitcoin Cash
      - RSK
      - Bitcoin SV
      - Bitcoin
      - Celo
      - Cortex
      - Dash
      - Dogecoin
      - Polkadot
      - Eco Smart
      - EOS.IO
      - Ethereum Classic
      - Evmos
      - Songbird
      - Smart Bitcoin Cash
      - Moonbeam
      - Moonriver
      - Hedera
      - Bitkub Chain
      - Kusama
      - Litecoin
      - Luna 2.0
      - NEAR Protocol
      - Songbird Legacy
      - XDC Network
      - Velas
      - DigitalBits
      - eCash
      - NEM
      - Ripple
      - Tezos
      - Zcash
      - Aurora.dev
      example:
        Ethereum
    Testnet_Networks:
      type: string
      description: "Enumeration on types of possible networks for a testnet exchange"
      enum:
        - Ethereum
        - BNB Chain
        - Arbitrum
        - Polygon
        - Avalanche
        - ANZ Bank
        - Solana
        - Cardano
        - Algorand
        - Optimism
        - Tron
        - Arbitrum Rinkeby
        - Stellar
        - Cosmos
        - Bitcoin Cash
        - RSK
        - Bitcoin SV
        - Bitcoin
        - Celo Alfajores
        - Celo Baklava
        - Dash
        - Dogecoin
        - Eco Smart
        - EOS.IO
        - Ethereum Classic
        - Smart Bitcoin Cash
        - Hedera
        - Bitkub Chain
        - Litecoin
        - Luna 2.0
        - NEAR Protocol
        - Velas
        - Westend
        - DigitalBits
        - eCash
        - NEM
        - Ripple
        - Tezos
        - Zcash
      example:
        Westend
    Coin_Class:
      type: string
      description: >
        Coin Classes:

          * `BASE` - A base blockchain asset
          * `TOKEN` - An asset over a blockchain (for example, ERC20).
                      In case of a token class, the "identifiers" field must be specified, to reduce loss-of-funds for clients.
      enum:
        - BASE
        - TOKEN
      example:
        TOKEN
    Direction_for_Sub_Main_transfer:
      type: string
      description: >
        Direction of a sub transfer:

          * `IN` - From sub account to the main account
          * `OUT` - From the main account to a sub account
      enum:
        - IN
        - OUT
      example:
        IN
    Direction_for_Deposit:
      type: string
      description: >
        Direction of a transfer:

          * `CRYPTO_DEPOSIT` - A crypto deposit operation
          * `CRYPTO_WITHDRAWAL` - A crypto withdrawal operation
      enum:
        - CRYPTO_DEPOSIT
        - CRYPTO_WITHDRAWAL
      example:
        CRYPTO_DEPOSIT
    Direction_for_Withdraw:
      type: string
      description: >
        Direction of a transfer:

          * `CRYPTO_DEPOSIT` - A crypto deposit operation
          * `CRYPTO_WITHDRAWAL` - A crypto withdrawal operation
      enum:
        - CRYPTO_DEPOSIT
        - CRYPTO_WITHDRAWAL
      example:
        CRYPTO_WITHDRAWAL
    Balance_Information:
      type: object
      required:
        - coinSymbol
        - totalAmount
        - pendingAmount
        - availableAmount
      properties:
        coinSymbol:
          type: string
          example: USDT
          description: "The symbol of the cryptocurrency"
        totalAmount:
          type: string
          example: "195.172612"
          description: "The total amount (as a string, for precision) in the account"
        pendingAmount:
          type: string
          example: "188.2315812"
          description: "The pending amount in usage, on mempool but not passed confirmations"
        availableAmount:
          type: string
          example: "10.333"
          description: "The available amount for usage, the amount the account has with guarantee"
        borrowedAmount:
          type: string
          example: "3.1"
          description: "The borrowed amount for usage, the amount the exchange borrowed to the user"
    Balance:
      type: object
      required:
        - type
        - balances
      properties:
        displayName:
          type: string
          example: "Margin (Cross)"
          description: "Text to describe the Account_Type. This will be visual on the console balance page."
          nullable: true
        type:
          $ref : '#/components/schemas/Account_Type'
        balances:
          type: array
          items:
            $ref: '#/components/schemas/Balance_Information'
    Status_Found:
      type: string
      description: >
        Types of possible statuses for transactions:

          * `PROCESSING` - The exchange is processing the transaction.
          * `CANCELLED` - The transaction was terminated by the account owner or the exchange.
          * `FAILED` - The transaction failed due to some error in the transaction.
          * `PENDING_MANUAL_APPROVAL` - The transaction requires some manual approval by the account owner.
          * `PENDING_SERVICE_MANUAL_APPROVAL` - The transaction is being reviewed manually by the exchange and hasn't been accepted yet.
          * `REJECTED` - The exchange rejected the transaction.
          * `COMPLETED` - The transaction is successfully on the blockchain (and passed enough confirmations).
      enum:
        - PROCESSING
        - CANCELLED
        - FAILED
        - PENDING_MANUAL_APPROVAL
        - PENDING_SERVICE_MANUAL_APPROVAL
        - REJECTED
        - COMPLETED
      example: "COMPLETED"
    Status_Not_Found:
      type: string
      description: >
        Failed to find the transaction.
      enum:
        - NOT_FOUND
      example: "NOT_FOUND"
